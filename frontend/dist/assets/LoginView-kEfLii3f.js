import{_ as V,u as B,e as m,f as S,c as p,b as a,a as l,w as n,g as y,r as h,o as c,h as b,i as k,j as x,d,t as E}from"./index-BvqHgb2h.js";import{B as q}from"./BaseCard-ieAyc1Mh.js";import{B as C}from"./BaseButton-CaRIBqmI.js";import{B as _}from"./BaseInput-BXvUm3jM.js";const I={class:"login-view"},L={class:"login-view__container"},N={class:"login-view__actions"},P={key:0,class:"login-view__error"},R={class:"login-view__footer"},A={__name:"LoginView",setup(D){const w=y(),u=B(),s=m({email:"",password:""}),r=m({email:"",password:""}),i=S(""),v=()=>{r.email="",r.password="",i.value="";let o=!0;return s.email?/\S+@\S+\.\S+/.test(s.email)||(r.email="Please enter a valid email",o=!1):(r.email="Email is required",o=!1),s.password||(r.password="Password is required",o=!1),o},g=async()=>{if(v())try{await u.login({email:s.email,password:s.password}),w.push("/dashboard")}catch(o){o.status===401?i.value="Invalid email or password":i.value=o.message||"An error occurred while signing in"}};return(o,e)=>{const f=h("RouterLink");return c(),p("div",I,[a("div",L,[l(q,{class:"login-view__card"},{default:n(()=>[e[5]||(e[5]=a("div",{class:"login-view__header"},[a("h1",{class:"login-view__title"},"Welcome Back"),a("p",{class:"login-view__subtitle"},"Sign in to your account")],-1)),a("form",{onSubmit:b(g,["prevent"]),class:"login-view__form"},[l(_,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=t=>s.email=t),label:"Email",type:"email",placeholder:"Enter your email",error:r.email,required:""},null,8,["modelValue","error"]),l(_,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.password=t),label:"Password",type:"password",placeholder:"Enter your password",error:r.password,required:""},null,8,["modelValue","error"]),a("div",N,[l(C,{type:"submit",size:"large",loading:x(u).loading,class:"w-full"},{default:n(()=>[...e[2]||(e[2]=[d(" Sign In ",-1)])]),_:1},8,["loading"])]),i.value?(c(),p("div",P,E(i.value),1)):k("",!0)],32),a("div",R,[a("p",null,[e[4]||(e[4]=d(" Don't have an account? ",-1)),l(f,{to:"/register",class:"login-view__link"},{default:n(()=>[...e[3]||(e[3]=[d(" Sign up ",-1)])]),_:1})])])]),_:1})])])}}},F=V(A,[["__scopeId","data-v-dc178657"]]);export{F as default};
